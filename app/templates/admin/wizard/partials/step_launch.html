<!-- Step 8: Launch -->
<div class="space-y-8">
    <div class="text-center space-y-3">
        <h1 class="text-4xl md:text-5xl font-light text-white">
            Meet <span class="text-brand-teal" x-text="stepData.name || 'your sidekick'"></span>
        </h1>
        <p class="text-dark-text-secondary text-lg">
            Review your sidekick's configuration and launch when ready
        </p>
    </div>

    <div class="max-w-2xl mx-auto space-y-6">
        <!-- Sidekick Preview Card -->
        <div class="glass-container rounded-2xl p-8 space-y-6">
            <!-- Avatar and Name -->
            <div class="flex items-center gap-6">
                <div class="w-24 h-24 rounded-2xl bg-dark-elevated overflow-hidden flex-shrink-0">
                    <template x-if="stepData.avatar_url">
                        <img :src="stepData.avatar_url" alt="Avatar" class="w-full h-full object-cover">
                    </template>
                    <template x-if="!stepData.avatar_url">
                        <div class="w-full h-full flex items-center justify-center text-4xl">
                            ü§ñ
                        </div>
                    </template>
                </div>
                <div>
                    <h2 class="text-2xl font-semibold text-white" x-text="stepData.name || 'Unnamed Sidekick'"></h2>
                    <p class="text-dark-text-muted text-sm" x-text="'/' + (stepData.slug || 'sidekick')"></p>
                </div>
            </div>

            <!-- Personality Summary -->
            <div class="space-y-2">
                <h3 class="text-sm font-medium text-dark-text-secondary uppercase tracking-wider">Personality</h3>
                <p class="text-white" x-text="stepData.personality_description || 'No personality defined'"></p>
            </div>

            <!-- Configuration Summary -->
            <div class="grid grid-cols-2 gap-4 pt-4 border-t border-white/10">
                <div class="space-y-3">
                    <div class="flex justify-between text-sm">
                        <span class="text-dark-text-secondary">Voice</span>
                        <span class="text-white" x-text="stepData.voice_name || 'Default'"></span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-dark-text-secondary">Speech-to-Text</span>
                        <span class="text-white" x-text="stepData.config_mode === 'default' ? 'Cartesia' : (stepData.advanced_config.stt_provider || 'Cartesia').charAt(0).toUpperCase() + (stepData.advanced_config.stt_provider || 'cartesia').slice(1)"></span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-dark-text-secondary">Text-to-Speech</span>
                        <span class="text-white" x-text="stepData.config_mode === 'default' ? 'Cartesia' : (stepData.advanced_config.tts_provider || 'Cartesia').charAt(0).toUpperCase() + (stepData.advanced_config.tts_provider || 'cartesia').slice(1)"></span>
                    </div>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between text-sm">
                        <span class="text-dark-text-secondary">Language Model</span>
                        <span class="text-white" x-text="stepData.config_mode === 'default' ? 'Cerebras GLM' : (stepData.advanced_config.llm_provider || 'Cerebras').charAt(0).toUpperCase() + (stepData.advanced_config.llm_provider || 'cerebras').slice(1)"></span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-dark-text-secondary">Embeddings</span>
                        <span class="text-white" x-text="stepData.config_mode === 'default' ? 'Qwen3 4B' : (stepData.advanced_config.embedding_provider || 'SiliconFlow').charAt(0).toUpperCase() + (stepData.advanced_config.embedding_provider || 'siliconflow').slice(1)"></span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-dark-text-secondary">API Keys</span>
                        <span class="text-white" x-text="stepData.api_keys_confirmed ? 'Configured' : 'Not configured'"></span>
                    </div>
                </div>
            </div>

            <!-- Knowledge Base Status -->
            <div class="pt-4 border-t border-white/10 space-y-2">
                <h3 class="text-sm font-medium text-dark-text-secondary uppercase tracking-wider">Knowledge Base</h3>
                <template x-if="knowledgeStatus.items && knowledgeStatus.items.length > 0">
                    <div class="space-y-2">
                        <template x-for="item in knowledgeStatus.items" :key="item.id">
                            <div class="flex items-center justify-between text-sm py-2 border-b border-white/5 last:border-0">
                                <div class="flex items-center gap-2">
                                    <span x-text="item.source_type === 'file' ? 'üìÑ' : 'üåê'"></span>
                                    <span class="text-white truncate max-w-xs" x-text="item.source_name"></span>
                                </div>
                                <span
                                    :class="{
                                        'text-yellow-400': item.status === 'pending' || item.status === 'processing',
                                        'text-green-400': item.status === 'ready',
                                        'text-red-400': item.status === 'error'
                                    }"
                                    x-text="item.status === 'ready' ? '‚úì Ready' : item.status === 'error' ? '‚úó Error' : '‚è≥ Processing'">
                                </span>
                            </div>
                        </template>
                        <template x-if="knowledgeStatus.processing_count > 0">
                            <p class="text-sm text-yellow-400 mt-2">
                                ‚è≥ <span x-text="knowledgeStatus.processing_count"></span> item(s) still processing...
                            </p>
                        </template>
                    </div>
                </template>
                <template x-if="!knowledgeStatus.items || knowledgeStatus.items.length === 0">
                    <p class="text-dark-text-muted text-sm">No documents added. You can add knowledge later from the dashboard.</p>
                </template>
            </div>
        </div>

        <!-- Launch Button -->
        <div class="text-center space-y-4">
            <button
                @click="launchSidekick()"
                :disabled="isLaunching"
                class="px-12 py-4 bg-gradient-to-r from-brand-teal to-brand-orange text-white rounded-xl font-semibold text-lg transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg shadow-brand-teal/25">
                <span x-show="!isLaunching" class="flex items-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                    </svg>
                    Launch <span x-text="stepData.name || 'Sidekick'"></span>
                </span>
                <span x-show="isLaunching" class="flex items-center gap-2">
                    <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Creating your sidekick...
                </span>
            </button>

            <p class="text-sm text-dark-text-muted">
                You'll be taken to your sidekick's dashboard after creation
            </p>
        </div>

        <!-- Processing Warning -->
        <template x-if="knowledgeStatus.processing_count > 0">
            <div class="flex items-start gap-3 p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                <svg class="w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                </svg>
                <div class="text-sm">
                    <p class="text-yellow-400 font-medium">Documents still processing</p>
                    <p class="text-dark-text-secondary mt-1">
                        You can launch now and your sidekick will have access to documents as they finish processing.
                    </p>
                </div>
            </div>
        </template>
    </div>
</div>
