<!-- Client Cards -->
{% for client in clients[:5] %}
{# Map provisioning status to display status #}
{% set is_ready = client.status == 'ready' or client.provisioning_status == 'ready' %}
{% set is_pending = client.status == 'pending' or client.provisioning_status == 'pending' %}
{% set display_status = 'running' if is_ready else ('pending' if is_pending else 'stopped') %}
<div class="client-card bg-dark-elevated rounded-lg p-4 hover:bg-dark-border transition-all">
    <div class="flex items-center justify-between">
        <div class="flex items-center">
            <div class="status-indicator status-{{ display_status }}"></div>
            <div>
                <h4 class="font-medium text-dark-text">
                    {{ client.client_name|default(client.name)|default(client.client_id) }}
                </h4>
                <p class="text-sm text-dark-text-secondary">{{ client.id|default(client.client_id) }}</p>
            </div>
        </div>
        <div class="text-right text-sm">
            <div class="text-dark-text-secondary">
                {% if is_ready %}
                    <span class="text-brand-teal">Ready</span>
                {% elif is_pending %}
                    <span class="text-brand-orange">Provisioning...</span>
                {% else %}
                    <span class="text-brand-salmon">{{ client.status|default('Not configured') }}</span>
                {% endif %}
            </div>
            <div class="text-dark-text-secondary">
                Sessions: {{ client.active_sessions|default(0) }}
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="mt-3 flex space-x-2">
        <a href="/admin/clients/{{ client.id|default(client.client_id) }}"
           class="text-xs bg-brand-teal/20 text-brand-teal px-2 py-1 rounded hover:bg-brand-teal/30 transition-all">
            View Details
        </a>
        {% if is_ready %}
        <a href="/admin/agents?client={{ client.id|default(client.client_id) }}"
           class="text-xs bg-brand-orange/20 text-brand-orange px-2 py-1 rounded hover:bg-brand-orange/30 transition-all">
            Sidekicks
        </a>
        {% elif is_pending %}
        <span class="text-xs bg-dark-border text-dark-text-secondary px-2 py-1 rounded">
            Setting up...
        </span>
        {% endif %}
    </div>
</div>
{% else %}
<div class="text-center py-8 text-dark-text-secondary">
    <svg class="mx-auto h-12 w-12 text-dark-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 48 48">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M34 40h10v-4a6 6 0 00-10.712-3.714M34 40H14m20 0v-4c0-1.313-.253-2.566-.712-3.714M14 40H4v-4a6 6 0 0110.712-3.714M14 40v-4c0-1.313.253-2.566.712-3.714m0 0A8.002 8.002 0 0122 6a8.002 8.002 0 017.288 11.286" />
    </svg>
    <h3 class="mt-2 text-sm font-medium text-dark-text">No clients found</h3>
    <p class="mt-1 text-sm text-dark-text-secondary">Get started by adding your first client.</p>
</div>
{% endfor %}

<!-- Show more link if there are more than 5 clients -->
{% if clients|length > 5 %}
<div class="text-center py-2">
    <a href="/admin/clients" class="text-brand-teal hover:text-brand-teal/80 text-sm font-medium transition-colors">
        View all {{ clients|length }} clients â†’
    </a>
</div>
{% endif %}