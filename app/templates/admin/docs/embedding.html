{% extends "admin/docs/base_docs.html" %}

{% set doc_title = "Embedding Your Sidekick" %}

{% block docs_content %}

<div class="docs-breadcrumb">
    <a href="/admin/docs">Docs</a>
    <span>/</span>
    <span>Embedding</span>
</div>

<div class="docs-hero">
    <h1>Embedding Your Sidekick</h1>
    <p>Deploy your AI sidekick on any website with a simple embed code. Supports text chat, voice conversations, and video mode out of the box.</p>
</div>

<div class="docs-toc">
    <h4>On this page</h4>
    <a href="#embed-url">Your Embed URL</a>
    <a href="#iframe-embed">Basic iframe Embed</a>
    <a href="#shortcode">WordPress Shortcode</a>
    <a href="#modes">Chat Modes</a>
    <a href="#fullscreen">Fullscreen Support</a>
    <a href="#react">React Component (Advanced)</a>
</div>

<!-- Section: Embed URL -->
<div class="docs-section" id="embed-url">
    <h2>Your Embed URL</h2>
    <p>Each sidekick has a unique embed URL based on your client ID and the sidekick's slug:</p>

    <div class="docs-code">
        <span class="comment"># Embed URL format</span><br>
        https://sidekickforge.com/embed/<span class="string">{client_id}</span>/<span class="string">{sidekick_slug}</span>
    </div>

    <p>You can find this URL on the sidekick detail page in the admin panel under the <strong>Embed</strong> tab.</p>

    <div class="docs-screenshot">
        <div class="docs-screenshot-bar">
            <div class="docs-screenshot-dot red"></div>
            <div class="docs-screenshot-dot yellow"></div>
            <div class="docs-screenshot-dot green"></div>
            <span>Sidekick Detail &mdash; Configuration</span>
        </div>
        <img src="/static/images/docs/sidekick-detail.png" alt="Sidekick Detail Page" style="width:100%;display:block;">
    </div>
</div>

<!-- Section: iframe Embed -->
<div class="docs-section" id="iframe-embed">
    <h2>Basic iframe Embed</h2>
    <p>The simplest way to add your sidekick to any webpage. Just paste this HTML where you want the sidekick to appear:</p>

    <div class="docs-code">
        &lt;<span class="keyword">iframe</span><br>
        &nbsp;&nbsp;src=<span class="string">"https://sidekickforge.com/embed/YOUR_CLIENT_ID/YOUR_SIDEKICK_SLUG"</span><br>
        &nbsp;&nbsp;style=<span class="string">"border: 0; width: 100%; min-height: 600px;"</span><br>
        &nbsp;&nbsp;allow=<span class="string">"microphone; camera"</span><br>
        &gt;&lt;/<span class="keyword">iframe</span>&gt;
    </div>

    <div class="docs-callout docs-callout-warning">
        <svg class="docs-callout-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        <div><strong>Important:</strong> The <code>allow="microphone; camera"</code> attribute is required for voice and video modes. Without it, the browser will block microphone access inside the iframe.</div>
    </div>

    <h3>Recommended Sizing</h3>
    <p>The embed is fully responsive. Here are recommended minimum dimensions for each mode:</p>

    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin: 16px 0;">
        <div style="background: rgba(20,20,20,0.6); border: 1px solid #2a2a2a; border-radius: 8px; padding: 16px; text-align: center;">
            <div style="color: #01a4a6; font-size: 13px; font-weight: 600; margin-bottom: 8px;">Text Chat</div>
            <div style="color: #888; font-size: 24px; font-weight: 300;">400 &times; 500</div>
            <div style="color: #555; font-size: 12px; margin-top: 4px;">px minimum</div>
        </div>
        <div style="background: rgba(20,20,20,0.6); border: 1px solid #2a2a2a; border-radius: 8px; padding: 16px; text-align: center;">
            <div style="color: #fc7244; font-size: 13px; font-weight: 600; margin-bottom: 8px;">Voice Chat</div>
            <div style="color: #888; font-size: 24px; font-weight: 300;">400 &times; 600</div>
            <div style="color: #555; font-size: 12px; margin-top: 4px;">px minimum</div>
        </div>
        <div style="background: rgba(20,20,20,0.6); border: 1px solid #2a2a2a; border-radius: 8px; padding: 16px; text-align: center;">
            <div style="color: #c4b5fd; font-size: 13px; font-weight: 600; margin-bottom: 8px;">Video Chat</div>
            <div style="color: #888; font-size: 24px; font-weight: 300;">500 &times; 700</div>
            <div style="color: #555; font-size: 12px; margin-top: 4px;">px minimum</div>
        </div>
    </div>
</div>

<!-- Section: WordPress Shortcode -->
<div class="docs-section" id="shortcode">
    <h2>WordPress Shortcode</h2>
    <p>If you're using the <a href="/admin/docs/wordpress">Sidekick Forge Connect</a> plugin, use the built-in shortcode for automatic WordPress authentication:</p>

    <div class="docs-code">
        [sidekick_forge_embed<br>
        &nbsp;&nbsp;src=<span class="string">"https://sidekickforge.com/embed/YOUR_CLIENT_ID/YOUR_SIDEKICK_SLUG"</span><br>
        &nbsp;&nbsp;width=<span class="string">"100%"</span><br>
        &nbsp;&nbsp;min_height=<span class="string">"600px"</span>]
    </div>

    <p>The shortcode accepts these attributes:</p>

    <div style="overflow-x: auto; margin: 16px 0;">
        <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
            <thead>
                <tr style="border-bottom: 1px solid #2a2a2a;">
                    <th style="text-align: left; padding: 10px 12px; color: #888; font-weight: 500;">Attribute</th>
                    <th style="text-align: left; padding: 10px 12px; color: #888; font-weight: 500;">Default</th>
                    <th style="text-align: left; padding: 10px 12px; color: #888; font-weight: 500;">Description</th>
                </tr>
            </thead>
            <tbody style="color: #b0b0b0;">
                <tr style="border-bottom: 1px solid #1a1a1a;"><td style="padding: 10px 12px;"><code style="color: #01a4a6;">src</code></td><td style="padding: 10px 12px;">&mdash;</td><td style="padding: 10px 12px;">Required. The embed URL for your sidekick.</td></tr>
                <tr style="border-bottom: 1px solid #1a1a1a;"><td style="padding: 10px 12px;"><code style="color: #01a4a6;">width</code></td><td style="padding: 10px 12px;">100%</td><td style="padding: 10px 12px;">Width of the embed container.</td></tr>
                <tr style="border-bottom: 1px solid #1a1a1a;"><td style="padding: 10px 12px;"><code style="color: #01a4a6;">height</code></td><td style="padding: 10px 12px;">&mdash;</td><td style="padding: 10px 12px;">Fixed height (overrides min_height).</td></tr>
                <tr style="border-bottom: 1px solid #1a1a1a;"><td style="padding: 10px 12px;"><code style="color: #01a4a6;">min_height</code></td><td style="padding: 10px 12px;">600px</td><td style="padding: 10px 12px;">Minimum height of the embed.</td></tr>
                <tr style="border-bottom: 1px solid #1a1a1a;"><td style="padding: 10px 12px;"><code style="color: #01a4a6;">aspect</code></td><td style="padding: 10px 12px;">&mdash;</td><td style="padding: 10px 12px;">Aspect ratio (e.g., <code>16/9</code> or <code>4/3</code>).</td></tr>
                <tr><td style="padding: 10px 12px;"><code style="color: #01a4a6;">class</code></td><td style="padding: 10px 12px;">&mdash;</td><td style="padding: 10px 12px;">Additional CSS classes for the iframe.</td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Section: Modes -->
<div class="docs-section" id="modes">
    <h2>Chat Modes</h2>
    <p>The embed supports three interaction modes, toggled via icons in the header:</p>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; margin: 20px 0;">
        <div style="background: rgba(1,164,166,0.06); border: 1px solid rgba(1,164,166,0.15); border-radius: 10px; padding: 20px;">
            <div style="font-size: 28px; margin-bottom: 12px;">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#01a4a6" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
            </div>
            <div style="color: #e0e0e0; font-weight: 600; margin-bottom: 6px;">Text</div>
            <div style="color: #888; font-size: 13px; line-height: 1.6;">Classic chat interface with streaming responses, citations, and markdown formatting.</div>
        </div>
        <div style="background: rgba(252,114,68,0.06); border: 1px solid rgba(252,114,68,0.15); border-radius: 10px; padding: 20px;">
            <div style="font-size: 28px; margin-bottom: 12px;">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#fc7244" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
            </div>
            <div style="color: #e0e0e0; font-weight: 600; margin-bottom: 6px;">Voice</div>
            <div style="color: #888; font-size: 13px; line-height: 1.6;">Real-time voice conversation with live transcription, audio visualizer, and turn detection.</div>
        </div>
        <div style="background: rgba(139,92,246,0.06); border: 1px solid rgba(139,92,246,0.15); border-radius: 10px; padding: 20px;">
            <div style="font-size: 28px; margin-bottom: 12px;">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2"><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2" ry="2"/></svg>
            </div>
            <div style="color: #e0e0e0; font-weight: 600; margin-bottom: 6px;">Video</div>
            <div style="color: #888; font-size: 13px; line-height: 1.6;">Face-to-face mode with an animated avatar. Powered by BitHuman or Ken Burns image animation.</div>
        </div>
    </div>

    <div class="docs-callout docs-callout-info">
        <svg class="docs-callout-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        <div>You can control which modes are available per sidekick from the sidekick configuration page. If only text is enabled, the mode toggle won't appear.</div>
    </div>
</div>

<!-- Section: Fullscreen -->
<div class="docs-section" id="fullscreen">
    <h2>Fullscreen Support</h2>
    <p>The embed includes a built-in fullscreen button next to the mode toggle. When activated, the embed expands to fill the entire screen. Users can exit fullscreen with the same button or by pressing <kbd style="background:#222; padding:2px 8px; border-radius:4px; border:1px solid #333; font-size:12px;">Esc</kbd>.</p>

    <p>Fullscreen mode works with all three chat modes and includes the conversation history overlay.</p>
</div>

<!-- Section: React -->
<div class="docs-section" id="react">
    <h2>React Component (Advanced)</h2>
    <p>For deeper integration in React applications, you can use the connection details API to build a custom UI:</p>

    <div class="docs-code">
        <span class="comment">// Fetch connection details</span><br>
        <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<br>
        &nbsp;&nbsp;<span class="string">`/api/embed/connection-details/${clientId}/${agentSlug}`</span>,<br>
        &nbsp;&nbsp;{ headers: { Authorization: <span class="string">`Bearer ${token}`</span> } }<br>
        );<br><br>
        <span class="keyword">const</span> { serverUrl, roomName, participantToken } = <span class="keyword">await</span> response.json();<br><br>
        <span class="comment">// Connect with LiveKit React Components</span><br>
        &lt;<span class="keyword">LiveKitRoom</span><br>
        &nbsp;&nbsp;serverUrl={serverUrl}<br>
        &nbsp;&nbsp;token={participantToken}<br>
        &nbsp;&nbsp;connect={<span class="keyword">true</span>}<br>
        /&gt;
    </div>

    <p>This approach gives you full control over the UI while using Sidekick Forge's backend for AI processing, voice synthesis, and knowledge retrieval.</p>
</div>

<div class="docs-nav-footer">
    <a href="/admin/docs/knowledge-base" class="docs-nav-link">
        <span class="label">Previous</span>
        <span class="title">&larr; Knowledge Base Guide</span>
    </a>
    <a href="/admin/docs/wordpress" class="docs-nav-link next">
        <span class="label">Next</span>
        <span class="title">WordPress Integration &rarr;</span>
    </a>
</div>

{% endblock %}
